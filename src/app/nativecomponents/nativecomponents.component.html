<div class="header">
  Native Components
</div>
<div class="body">
  <div class="search-hero">
    <input class="form-control" type="text" name="search" [(ngModel)]="searchText" autocomplete="off" placeholder="&#61442;  search native components">
  </div>
  <ul class="directory-list">
    <li (click)="openORcloseR()" [ngClass]="{'folderopen':(isRootOpen),'folderclose':(!isRootOpen)}">
      <ng-container *ngTemplateOutlet="iconImg; context:{ type: 'RH' }"> </ng-container>
      <span class="bold"> Root </span>
      <ul *ngIf="isRootOpen">
        <ng-container *ngTemplateOutlet="components; context:{ list: templateService.nativeComponents,type:'R' }">
        </ng-container>
      </ul>
    </li>
  </ul>
  <ul class="directory-list">
    <li (click)="openORcloseST()" [ngClass]="{'folderopen':(isSimpletypesOpen),'folderclose':(!isSimpletypesOpen)}">
      <ng-container *ngTemplateOutlet="iconImg; context:{ type: 'STH' }"> </ng-container>
      <span class="bold"> Simple Types </span>
      <ul *ngIf="isSimpletypesOpen">
        <ng-container *ngTemplateOutlet="components; context:{ list: templateService.nativeComponents,type:'ST' }">
        </ng-container>
      </ul>
    </li>
  </ul>
  <ul class="directory-list">
    <li (click)="openORcloseCT()" [ngClass]="{'folderopen':(isComplextypesOpen),'folderclose':(!isComplextypesOpen)}">
      <ng-container *ngTemplateOutlet="iconImg; context:{ type: 'CTH' }"> </ng-container>
      <span class="bold"> Complex Types </span>
      <ul *ngIf="isComplextypesOpen">
        <ng-container *ngTemplateOutlet="components; context:{ list: templateService.nativeComponents,type:'CT' }">
        </ng-container>
      </ul>
    </li>
  </ul>
  <ul class="directory-list">
    <li (click)="openORclosePT()" [ngClass]="{'folderopen':(isPrimitivtypesOpen),'folderclose':(!isPrimitivtypesOpen)}">
      <ng-container *ngTemplateOutlet="iconImg; context:{ type: 'PTH' }"> </ng-container>
      <span class="bold"> Primitive Types </span>
      <ul *ngIf="isPrimitivtypesOpen">
        <ng-container *ngTemplateOutlet="components; context:{ list: templateService.nativeComponents,type:'PT' }">
        </ng-container>
      </ul>
    </li>
  </ul>
</div>

<ng-template #components let-list="list" let-type="type">
  <ng-container *ngFor="let nativeComponent of list">
    <li class="nativetype" *ngIf="(nativeComponent.type == type) && (!searchText || searchText=='' ||  nativeComponent.typeName.toLocaleLowerCase().indexOf(searchText.toLocaleLowerCase())>-1)" (click)="templateService.stopPropagation()"> 
      <ng-container *ngTemplateOutlet="iconImg; context:{ type: nativeComponent.type }"> </ng-container>
      <ng-container *ngIf="isTypeEditable(nativeComponent)">
        <input class="nativetypes" title="{{nativeComponent.typeName}}" type="text" id="{{nativeComponent.typeName}}" value="{{nativeComponent.typeName}}"
        autocomplete="off" (blur)="changeTypeName(nativeComponent,$event.target.value)" (dblclick)="templateService.stopPropagation()" (click)="templateService.stopPropagation()">
      </ng-container>
      <ng-container *ngIf="editableTypeId != nativeComponent.id.typeId">
        <div class="readonlytype bg-t" title="{{nativeComponent.typeName}}" (dblclick)="activateEdit(nativeComponent)" (click)="templateService.stopPropagation()">
          {{nativeComponent.typeName}}
        </div>
      </ng-container>      
    </li>
  </ng-container>
</ng-template>

<ng-template #iconImg let-type="type">
  <img src="../../assets/images/explorer/arrow-right.svg" *ngIf="type == '0'">
  <img src="../../assets/images/explorer/arrow-down.svg" *ngIf="type == '1'">
  <img src="../../assets/images/templatedesigner/simpletype.svg" *ngIf="type == 'ST'">
  <img src="../../assets/images/templatedesigner/complextype.svg" *ngIf="type == 'CT'">
  <img src="../../assets/images/templatedesigner/primitivetype.svg" *ngIf="type == 'PT'">
  <img src="../../assets/images/templatedesigner/root.svg" *ngIf="type == 'R'">
</ng-template>